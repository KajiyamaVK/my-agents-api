services:
  api:
    build: .
    container_name: my-agents-api
    restart: unless-stopped
    environment:
      - PORT=3000
      - DATABASE_URL=file:../dev.db # Ajuste conforme seu schema.prisma
      - FLOW_CLIENT_ID=${FLOW_CLIENT_ID}
      - FLOW_CLIENT_SECRET=${FLOW_CLIENT_SECRET}
      - FLOW_TENANT=${FLOW_TENANT}
      - FLOW_AGENT=${FLOW_AGENT}
      - FLOW_APP_TO_ACCESS=${FLOW_APP_TO_ACCESS}
      # Standard NestJS prod setting
      - NODE_ENV=production
    volumes:
      # Persistência do SQLite (ajuste o caminho se necessário)
      - ./dev.db:/app/dev.db
      - ./scraped_docs:/app/scraped_docs
    networks:
      - proxy-net

networks:
  proxy-net:
    external: true
